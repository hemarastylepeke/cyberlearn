{% extends 'main/loginbase.html' %}
{% load static %}

{% block content %}
<div class="text-base text-gray-500 border-b border-slate-200">
    <div class="flex flex-col gap-4 mb-6">
        <div class="flex flex-row gap-4 items-center">
            <div class="bg-gradient-to-r from-blue-600 to-blue-950 w-[10px] h-[25px] rounded-lg"></div>
            <h1 class="font-bold text-lg">{{ interpreter.username }}'s details</h1>
        </div>
        <p class="text-sm leading-6">
            View and manage {{ interpreter.username }}'s details from this page. See their profile information and other important information.
        </p>
    </div>
</div>  
{% if interpreter_profile %} 
<div class="flex flex-col md:flex-row gap-4 py-6">
    <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-md" style="height: 300px; max-width: 400px;">
        <div class="flex flex-row gap-4">
            {% if interpreter_profile.profile_image %}
            <img class="w-10 h-10 rounded-full object-contain border-transparent border" src="{{ interpreter_profile.profile_image.url }}" alt="Profile Picture">
            {% else %}
            <img class="w-10 h-10 object-contain rounded-full border-transparent border" src="{% static 'images/default_user_profile.png' %}" alt="user photo">
            {% endif %}
            <div>
                <p class="text-primary">{{ interpreter_profile.firstname }} {{ interpreter_profile.lastname }}</p>
                <small class="text-gray-500">{{ interpreter.email }}</small>
            </div>
        </div>
        <div class="flex flex-col gap-3 border-t border-slate-200 mt-3 pt-4">
            <div>
                <h1 class="text-green-600">{{ interpreter_profile.phone_number|default:"Not provided" }}</h1>
                <p class="text-gray-500">Phone</p>
            </div>
            <div>
                <h1 class="text-purple-600">{{ interpreter.date_joined|date:"F d, Y" }}</h1>
                <p class="text-gray-500">Date joined</p>
            </div>
            <div>
                <h1 class="text-red-600">{{ interpreter.last_login|date:"F d, Y H:i"|default:"Never" }}</h1>
                <p class="text-gray-500">Last login</p>
            </div>
        </div>
    </div>
    <div class="flex-col bg-white p-4 rounded-lg border border-slate-200 shadow-md w-full max-w-6xl">
        <div class="bg-white">
            <h1 class="text-slate-600 font-barlow text-2xl mb-4">General information.</h1>
            <div class="flex flex-col md:flex-row gap-6 border-t border-slate-200 py-3">
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Username</p>
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ interpreter.username }}</p>
                </div>
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Email</p>
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ interpreter.email }}</p>
                </div>
            </div>
            <div class="flex flex-col md:flex-row gap-6 py-3">
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Language Applied for</p>
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ interpreter_profile.translation_language }}</p>
                </div>
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Region</p>
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ interpreter_profile.region }}</p>
                </div>
            </div>
            <div class="flex flex-col md:flex-row gap-6 py-3">
                <div class="w-full max-w-lg">
                    <p class="text-gray-600 mb-2 font-barlow">Curriculum Vitae (CV)</p>
                    {% if interpreter_profile.cv %}
                        <div class="border border-slate-300 rounded-[5px] p-2 text-slate-600 flex items-center justify-between">
                            <span class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-blue-600">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0-1.125.504-1.125 1.125V11.25a9 9 0 0 0-9-9Z" />
                                </svg>
                                <span class="truncate">{{ interpreter_profile.cv.name|slice:"20:" }}</span>
                            </span>
                            <a href="{{ interpreter_profile.cv.url }}" 
                            download 
                            class="ml-2 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
                                </svg>
                                Download
                            </a>
                        </div>
                    {% else %}
                        <div class="border border-slate-300 rounded-[5px] p-2 text-slate-400 italic">
                            No CV uploaded
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="flex flex-col md:flex-row gap-6 mt-4">
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">First name</p>
                    {% if interpreter_profile.firstname %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ interpreter_profile.firstname }}</p>
                    {% else %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-red-400">None</p>
                    {% endif %}
                </div>
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Last name</p>
                    {% if interpreter_profile.lastname %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ interpreter_profile.lastname }}</p>
                    {% else %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-red-400">None</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="flex flex-col gap-4 mt-6">
            <form method="post" action="{% url 'toggle_interpreter_status' interpreter.id %}" class="mb-2">
                {% csrf_token %}
                {% if interpreter.is_active %}
                    <button type="submit" class="bg-yellow-600 hover:bg-yellow-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white max-w-sm w-full">Deactivate Interpreter's account</button>
                {% else %}
                    <button type="submit" class="bg-purple-600 hover:bg-purple-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white max-w-sm w-full">Activate Interpreter's account</button>
                {% endif %}
            </form>
            <form method="post" action="{% url 'admin_approve_interpreter' interpreter.id %}">
                {% csrf_token %}
                {% if interpreter_profile.is_approved %}
                <button type="submit" class="bg-red-600 hover:bg-red-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white max-w-sm w-full">Unapprove Interpreter</button>
                {% else %}
                <button type="submit" class="bg-green-600 hover:bg-green-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white max-w-sm w-full">Approve Interpreter</button>
                {% endif %}
            </form>
            <form method="post" action="{% url 'delete_interpreter' interpreter.id %}"  onsubmit="return confirm('Are you sure you want to delete this Interpreter? This action cannot be undone.')">
                {% csrf_token %}
                <button type="submit" class="bg-red-600 hover:bg-red-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white max-w-sm w-full">Delete Interpreter</button>
            </form>
        </div>
    </div>
</div>
{% else %}
<p class="bg-blue-600/5 rounded-2xl border border-blue-200/40 text-blue-800 p-8 text-center gap-3 items-center flex flex-col">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
        <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
    </svg>
    <span>No profile information available for this Translator.</span>
</p>
{% endif %}
{% endblock content %}