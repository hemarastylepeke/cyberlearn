{% extends "main/loginbase.html" %}
{% load static %}

{% block content %}
<div class="w-full xl:max-w-4xl mx-auto py-8 px-4">
    <div class="mb-8">
        <div class="flex flex-col gap-4">
            <div class="flex flex-row gap-4 items-center">
                <div class="bg-gradient-to-r from-indigo-600 to-indigo-950 w-[10px] h-[25px] rounded-lg"></div>
                <h1 class="font-bold text-2xl text-slate-900">
                    {% if note %}Edit Note{% else %}Create New Note{% endif %}
                </h1>
            </div>
            <p class="text-sm text-slate-600 leading-6">
                {% if note %}
                    Update your note content and save the changes.
                {% else %}
                    Start creating a new note to organize your thoughts and ideas.
                {% endif %}
            </p>
        </div>
    </div>

    <div class="bg-white rounded-xl border border-slate-200 shadow-sm">
        <form method="post" class="p-8">
            {% csrf_token %}

            <!-- Error Messages -->
            {% if form.non_field_errors %}
                <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                    <div class="flex gap-3">
                        <svg class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <div>
                            <h3 class="text-sm font-medium text-red-800">Error</h3>
                            <div class="text-sm text-red-700 mt-1">
                                {% for error in form.non_field_errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}

            <!-- Title Field -->
            <div class="mb-6">
                <label for="{{ form.title.id_for_label }}" class="block text-sm font-medium text-slate-900 mb-2">
                    Note Title <span class="text-red-600">*</span>
                </label>
                <input 
                    type="text" 
                    name="title" 
                    id="{{ form.title.id_for_label }}"
                    value="{{ form.title.value|default:'' }}"
                    placeholder="Enter note title"
                    class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-slate-900"
                    required
                >
                {% if form.title.errors %}
                    <p class="text-red-600 text-sm mt-2">
                        {% for error in form.title.errors %}{{ error }}{% endfor %}
                    </p>
                {% endif %}
            </div>

            <!-- Content Field -->
            <div class="mb-6">
                <label for="{{ form.content.id_for_label }}" class="block text-sm font-medium text-slate-900 mb-2">
                    Note Content
                </label>
                <textarea 
                    name="content" 
                    id="{{ form.content.id_for_label }}"
                    placeholder="Write your note here..."
                    rows="15"
                    class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-slate-900 resize-none"
                >{{ form.content.value|default:'' }}</textarea>
                {% if form.content.errors %}
                    <p class="text-red-600 text-sm mt-2">
                        {% for error in form.content.errors %}{{ error }}{% endfor %}
                    </p>
                {% endif %}
                <p class="text-xs text-slate-500 mt-2">You can write as much as you want in your note.</p>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-3 justify-between pt-6 border-t border-slate-200">
                <a href="{% url 'all_notes' %}" class="px-6 py-2 bg-slate-200 hover:bg-slate-300 text-slate-900 font-medium rounded-lg transition-colors text-center">
                    Cancel
                </a>
                <button 
                    type="submit" 
                    class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.047.662M19.5 12a48.694 48.694 0 01-1.359 5.345m-11.141 3.12a24.053 24.053 0 001.362 5.346C9.001 21.54 10.458 22.5 12 22.5c1.541 0 3-.006 4.361-.451.896-.194 1.748-.544 2.506-1.051 1.264-.915 2.466-2.317 3.316-3.878.156-.294.296-.584.42-.866l-1.34-1.34a4.5 4.5 0 01-1.06 1.192 4.002 4.002 0 01-3.782.342 4.002 4.002 0 01-1.946-1.781 4 4 0 01-.578-1.355 4.023 4.023 0 01.21-3.814"/>
                    </svg>
                    {% if note %}Update Note{% else %}Create Note{% endif %}
                </button>
            </div>
        </form>
    </div>

    <!-- Help Text -->
    <div class="mt-8 bg-indigo-50 border border-indigo-200 rounded-lg p-6">
        <h3 class="text-sm font-semibold text-indigo-900 mb-2">Tips for Better Notes</h3>
        <ul class="space-y-1 text-sm text-indigo-800">
            <li class="flex gap-2">
                <span>•</span>
                <span>Use clear and descriptive titles to make your notes easy to find later</span>
            </li>
            <li class="flex gap-2">
                <span>•</span>
                <span>Organize your thoughts and ideas in a structured way</span>
            </li>
            <li class="flex gap-2">
                <span>•</span>
                <span>You can create as many notes as you want on the Premium plan</span>
            </li>
        </ul>
    </div>
</div>
{% endblock content %}