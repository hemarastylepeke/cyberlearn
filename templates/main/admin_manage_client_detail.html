{% extends 'main/loginbase.html' %}
{% load static %}

{% block content %}
<div class="text-base text-gray-500 border-b border-slate-200">
    <div class="flex flex-col gap-4 mb-6">
        <div class="flex flex-row gap-4 items-center">
            <div class="bg-gradient-to-r from-blue-600 to-blue-950 w-[10px] h-[25px] rounded-lg"></div>
            <h1 class="font-bold text-lg">{{ client.username }}'s details</h1>
        </div>
        <p class="text-sm leading-6">
            View and manage {{ client.username }}'s details from this page. See their profile information and other important information.
        </p>
    </div>
</div>  
{% if client_profile %} 
<div class="flex flex-col md:flex-row gap-4 py-6">
    <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-md" style="height: 300px; max-width: 400px;">
        <div class="flex flex-row gap-4">
            {% if client_profile.profile_image %}
            <img class="w-10 h-10 rounded-full object-contain border-transparent border" src="{{ client_profile.profile_image.url }}" alt="Profile Picture">
            {% else %}
            <img class="w-10 h-10 object-contain rounded-full border-transparent border" src="{% static 'images/default_user_profile.png' %}" alt="user photo">
            {% endif %}
            <div>
                <p class="text-primary">{{ client_profile.firstname }} {{ client_profile.lastname }}</p>
                <small class="text-gray-500">{{ client.email }}</small>
            </div>
        </div>
        <div class="flex flex-col gap-3 border-t border-slate-200 mt-3 pt-4">
            <div>
                <h1 class="text-green-600">{{ client_profile.phone_number|default:"Not provided" }}</h1>
                <p class="text-gray-500">Phone</p>
            </div>
            <div>
                <h1 class="text-purple-600">{{ client.date_joined|date:"F d, Y" }}</h1>
                <p class="text-gray-500">Date joined</p>
            </div>
            <div>
                <h1 class="text-red-600">{{ client.last_login|date:"F d, Y H:i"|default:"Never" }}</h1>
                <p class="text-gray-500">Last login</p>
            </div>
        </div>
    </div>
    <div class="flex-col bg-white p-4 rounded-lg border border-slate-200 shadow-md w-full max-w-6xl">
        <div class="bg-white">
            <h1 class="text-slate-600 font-barlow text-2xl mb-4">General information.</h1>
            <div class="flex flex-col md:flex-row gap-6 border-t border-slate-200 py-3">
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Username</p>
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ client.username }}</p>
                </div>
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Email</p>
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ client.email }}</p>
                </div>
            </div>
            <div class="flex flex-col md:flex-row gap-6 mt-4">
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">First name</p>
                    {% if client_profile.firstname %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ client_profile.firstname }}</p>
                    {% else %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-red-400">None</p>
                    {% endif %}
                </div>
                <div class="w-full">
                    <p class="text-gray-600 mb-2 font-barlow">Last name</p>
                    {% if client_profile.lastname %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-slate-600">{{ client_profile.lastname }}</p>
                    {% else %}
                    <p class="border border-slate-300 rounded-[5px] p-2 text-red-400">None</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="mt-4 mb-4 flex flex-row justify-between">
            <form method="post" action="{% url 'toggle_client_status' client.id %}" class="mb-2">
                {% csrf_token %}
                {% if client.is_active %}
                    <button type="submit" class="bg-yellow-600 hover:bg-yellow-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white">Deactivate Client</button>
                {% else %}
                    <button type="submit" class="bg-green-600 hover:bg-green-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white">Activate Client</button>
                {% endif %}
            </form>
            <form method="post" action="{% url 'delete_client' client.id %}"  onsubmit="return confirm('Are you sure you want to delete this client? This action cannot be undone.')">
                {% csrf_token %}
                <button type="submit" class="bg-red-600 hover:bg-red-800 py-2 px-3 hover:cursor-pointer ease-in duration-300 rounded-lg text-white">Delete Client</button>
            </form>
        </div>
    </div>
</div>
{% else %}
<p class="bg-blue-600/5 rounded-2xl border border-blue-200/40 text-blue-800 p-8 text-center gap-3 items-center flex flex-col">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
        <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
    </svg>
    <span>No profile information available for this client.</span>
</p>
{% endif %}
{% endblock content %}